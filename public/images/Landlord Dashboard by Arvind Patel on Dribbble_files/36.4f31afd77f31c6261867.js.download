(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{255:function(t,e,i){"use strict";var a={name:"VImg",props:{refId:{type:[Number,String],required:!1,default:""},src:{type:String,default:null},altImageText:{type:String,default:null},srcset:{type:String,default:null},dataSrc:{type:String,default:null},dataSrcset:{type:String,default:null},dataAspectRatio:{type:Number,default:null},isLazyLoaded:{type:Boolean,default:!1},sizes:{type:String,default:null},width:{type:Number,default:null},height:{type:Number,default:null}},mounted:function(){this.isLazyLoaded&&this.$el.classList.add("lazyload")},methods:{emitImageLoad:function(t){this.$emit("image-load",{id:this.refId,el:t.target})}}},o=i(0),n=Object(o.a)(a,(function(){var t=this;return(0,t._self._c)("img",{staticClass:"v-img",attrs:{"data-test":"v-img",src:t.src,alt:t.altImageText,width:t.width,height:t.height,srcset:t.srcset,"data-src":t.isLazyLoaded&&t.dataSrc,"data-srcset":t.isLazyLoaded&&t.dataSrcset,"data-sizes":t.isLazyLoaded?"auto":null,"data-aspectratio":t.isLazyLoaded&&t.dataAspectRatio,sizes:!t.isLazyLoaded&&t.sizes,draggable:!1},on:{load:t.emitImageLoad}})}),[],!1,null,null,null);e.a=n.exports},327:function(t,e,i){"use strict";var a=i(22),o=i(4),n=i(39),r=function(t){var e=t.mediaUrl,i=t.width,a=t.height,o=void 0===a?"":a;return Object(n.a)(e,{resize:"".concat(i,"x").concat(o),vertical:"center"})},s=function(t){var e=t.mediaUrl,i=t.appendHeight,a=void 0!==i&&i;return decodeURIComponent(Object(n.a)(e,{resize:a?"{width}x{height}":"{width}x",vertical:"center"}))},d=function(t){var e=t.mediaUrl,i=t.widths,a=t.aspectRatio;return e?i.map((function(t){var i=Math.round(t/a),o=r({mediaUrl:e,width:t,height:i});return"".concat(o," ").concat(t,"w")})).join(", "):""},l={name:"Observer",props:{root:{type:Object,default:null},rootMargin:{type:[String,Number],default:"0px"},threshold:{type:[Array,Number],default:0}},data:function(){return{observer:null}},mounted:function(){var t=this,e={root:this.root,rootMargin:this.rootMargin,threshold:this.threshold};this.observer=new IntersectionObserver((function(e){t.$emit("on-change",e[0],t.unobserve)}),e),this.observer.observe(this.$el)},beforeDestroy:function(){this.observer&&(this.unobserve(),this.observer=null)},methods:{unobserve:function(){this.observer.unobserve(this.$el)}}},c=i(0),u=Object(c.a)(l,(function(){return(0,this._self._c)("div",[this._t("default")],2)}),[],!1,null,null,null).exports,h={name:"MediaSkeletonProvider",props:{isLoaded:{type:Boolean,default:!1},aspectRatio:{type:String,default:"auto"}}};i(507);function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function m(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(Object(i),!0).forEach((function(e){b(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function b(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,e||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var f={name:"BlockMediaView",components:{Observer:u,MediaSkeletonProvider:Object(c.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"img-skeleton-wrapper",class:[t.isLoaded?"loaded":"loading"],style:{aspectRatio:t.aspectRatio}},[[t._t("default")],t._v(" "),e("div",{staticClass:"skeleton-container skeleton-template animate-translate"})],2)}),[],!1,null,"6751b68c",null).exports,VImg:i(255).a},props:{block:o.z,mediaId:{type:[String,null],default:null},isEditing:{type:Boolean,default:!1},aspectRatio:{type:[Number,null],default:null},objectFit:{type:String,default:o.m,validator:function(t){return o.P.includes(t)}},contentObject:o.A,isStillVideo:{type:Boolean,default:!1},togglePlayOnClick:{type:Boolean,default:!1},preventLazyLoad:{type:Boolean,default:!1},preventLightbox:{type:Boolean,default:!1}},data:function(){return{MEDIA_IMAGE_TYPE:a.b,MEDIA_VIDEO_TYPE:a.c,MEDIA_GIF_TYPE:a.a,OBJECT_FIT_COVER:o.n,OBJECT_FIT_CONTAIN:o.m,generateResizedMediaUrl:r,isMounted:!1,isMediaLoaded:!1,isVisible:!1,observerKey:""}},computed:{nonLazyWidths:function(){var t=this;return[300,400,600,752,1024,1200,1504,2048,2400].filter((function(e){return e<=t.width}))},blockMediaParams:function(){return{block:this.block,mediaId:this.mediaId}},media:function(){var t;return null==(t=o.c.get(this.blockMediaParams))?void 0:t.media},userUpload:function(){var t;return null==(t=o.c.get(this.blockMediaParams))?void 0:t.userUpload},width:function(){var t;return(null==(t=this.media)?void 0:t.width)||320},height:function(){var t;return(null==(t=this.media)?void 0:t.height)||240},containerAspectRatio:function(){return this.aspectRatio||this.mediaAspectRatio},mediaAspectRatio:function(){return o.c.aspect(this.blockMediaParams)},mediaUrl:function(){return o.c.url(this.blockMediaParams)},stillMediaUrl:function(){var t=o.c.url(m(m({},this.blockMediaParams),{},{isStill:!0}))||"";return t.includes("blob:")?"":t},autoFitClass:function(){return this.mediaAspectRatio>this.containerAspectRatio?"auto-height":"auto-width"},mediaContentObject:function(){return Object.keys(this.contentObject).length?this.contentObject:this.block.content},supportsResizing:function(){var t,e;return(null==(t=this.media)?void 0:t.type)===a.b&&(null==(e=this.media)?void 0:e.fileExtension)!==a.a},isMediaLoading:function(){return!!this.media&&!this.isMediaLoaded},isMediaLazy:function(){var t;return!this.isEditing&&((null==(t=this.media)?void 0:t.type)===a.c||!this.preventLazyLoad)},videoSrc:function(){if(!this.isMounted)return o.c.url(this.blockMediaParams);var t=this.$el.offsetWidth*(window.devicePixelRatio||1);return o.c.url(m(m({},this.blockMediaParams),{},{elementWidth:t}))},shouldVideoPlay:function(){return!this.isStillVideo&&this.isVisible&&this.mediaContentObject.shouldVideoAutoplay},lightboxImageSrcset:function(){var t=this,e=[this.width,640,850,1024,1600,1905,2400,3810].filter((function(e){return e<=t.width}));return d({mediaUrl:this.mediaUrl,aspectRatio:this.mediaAspectRatio,widths:e})},imageProps:function(){var t,e={refId:null==(t=this.media)?void 0:t.id,class:"content-block border-radius-8",altImageText:this.mediaContentObject.alt,height:this.height,width:this.width},i=this.stillMediaUrl||this.mediaUrl;if(this.isEditing||!this.supportsResizing)return m({src:i,isLazyLoaded:!this.isEditing},e);if(this.preventLazyLoad){var a=this.objectFit===o.n?this.containerAspectRatio:this.mediaAspectRatio;return m({src:r({mediaUrl:i,width:this.width<752?this.width:752}),srcSet:d({mediaUrl:i,aspectRatio:a,widths:this.nonLazyWidths}),sizes:this.block.content.isFullWidth?"(max-width: 767px) 100vw, (max-width: 919px) calc(100vw - 32px), (max-width: 1278px) calc(100vw - 240px), 1024px":"(max-width: 788px) calc(100vw - 32px), 752px",isLazyLoaded:!1},e)}return m({dataSrc:s({mediaUrl:i,appendHeight:!0}),dataAspectRatio:this.objectFit===o.m?this.mediaAspectRatio:this.containerAspectRatio,isLazyLoaded:!0},e)}},watch:{shouldVideoPlay:function(t){t?this.playVideo():this.pauseVideo()}},mounted:function(){var t,e,i,o=this;this.isMounted=!0,this.observerKey="".concat(null==(t=this.media)?void 0:t.type,"-").concat(Dribbble.uuidv4()),(null==(e=this.media)?void 0:e.type)!==a.b||this.preventLightbox||Dribbble.EventBus.$emit("lightbox-item:mounted"),(null==(i=this.media)?void 0:i.type)!==a.c||this.isStillVideo||customElements.whenDefined("drb-video").then((function(){o.$nextTick((function(){var t=o.$el.querySelector("drb-video");null!=t&&t.videoHasLoaded&&o.setMediaLoaded()}))}))},methods:{updateVisibility:function(t){this.isVisible=t.isIntersecting},setMediaLoaded:function(){this.isMediaLoaded=!0},playVideo:function(){try{var t;null==(t=this.$refs.videoElement)||t.play()}catch(e){console.warn("Video playback failed:",e)}},pauseVideo:function(){var t;null==(t=this.$refs.videoElement)||t.pause()}}},v=(i(508),Object(c.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"block-media-wrapper",style:{aspectRatio:t.containerAspectRatio.toString()}},[t.media?e("observer",{key:t.observerKey,class:`block-media ${t.objectFit} ${t.autoFitClass} ${t.isMediaLazy&&"is-lazy"}`,style:{aspectRatio:(t.objectFit===t.OBJECT_FIT_COVER?t.containerAspectRatio:t.mediaAspectRatio).toString(),"--object-fit":t.objectFit},attrs:{threshold:[.5]},on:{"on-change":t.updateVisibility}},[t.isMediaLoading?e("media-skeleton-provider",{staticClass:"skeleton-wrapper"}):t._e(),t._v(" "),t.media.type===t.MEDIA_IMAGE_TYPE?[t.preventLightbox?e("v-img",t._b({on:{"image-load":t.setMediaLoaded}},"v-img",t.imageProps,!1)):e("a",{attrs:{"data-photoswipe-image":"",href:t.supportsResizing?t.generateResizedMediaUrl({mediaUrl:t.mediaUrl,width:752}):t.mediaUrl,"data-pswp-srcset":t.supportsResizing?t.lightboxImageSrcset:"","data-pswp-width":t.width,"data-pswp-height":t.height,"data-cropped":t.objectFit===t.OBJECT_FIT_COVER,target:"_blank"}},[e("v-img",t._b({on:{"image-load":t.setMediaLoaded}},"v-img",t.imageProps,!1))],1)]:t.media.type===t.MEDIA_VIDEO_TYPE&&t.isStillVideo&&t.stillMediaUrl?[e("v-img",t._b({on:{"image-load":t.setMediaLoaded}},"v-img",t.imageProps,!1))]:t.media.type===t.MEDIA_VIDEO_TYPE?[e("drb-video",{staticClass:"video-container",class:{"is-loaded":!t.isMediaLoading},attrs:{"toggle-play-on-click":t.togglePlayOnClick},on:{"video-loaded":t.setMediaLoaded}},[e("video",{ref:"videoElement",attrs:{src:t.videoSrc,loop:t.mediaContentObject.shouldVideoLoop,preload:"auto",playsinline:"",muted:""},domProps:{muted:!0}})])]:t._e()],2):t._e()],1)}),[],!1,null,"77c128cd",null));e.a=v.exports},374:function(t,e,i){},375:function(t,e,i){},507:function(t,e,i){"use strict";i(374)},508:function(t,e,i){"use strict";i(375)},829:function(t,e,i){"use strict";i.r(e);var a=i(4),o={name:"BasicMediaBlockView",components:{BlockMediaView:i(327).a},props:{block:a.z}},n=i(0),r=Object(n.a)(o,(function(){var t=this;return(0,t._self._c)("block-media-view",{attrs:{block:t.block,"media-id":t.block.content.mediaId,"prevent-lazy-load":0===t.block.position,"toggle-play-on-click":!0}})}),[],!1,null,null,null);e.default=r.exports}}]);