<div class="dashboard-container">
  <aside class="sidebar" [class.open]="isSidebarOpen" [class.mobile-open]="isMobileMenuOpen">
    <div class="sidebar-header">
      <h2>Caretaker</h2>
      <button mat-icon-button (click)="toggleSidebar()" class="toggle-btn">
        <mat-icon>{{ isSidebarOpen ? 'close' : 'menu' }}</mat-icon>
      </button>
    </div>

    <nav class="sidebar-nav">
      <button 
        *ngFor="let item of navItems" 
        mat-button 
        [class.active]="currentView === item.id || (currentView === 'profile-view' && item.id === 'profile') || (currentView === 'profile-edit' && item.id === 'profile')"
        (click)="setView(item.id)"
        class="nav-item">
        <mat-icon>{{ item.icon }}</mat-icon>
        <span>{{ item.label }}</span>
      </button>
    </nav>

    <div class="sidebar-footer">
      <button mat-button (click)="logout()" class="logout-btn">
        <mat-icon>logout</mat-icon>
        <span>Logout</span>
      </button>
    </div>
  </aside>

  <div class="main-content" [class.sidebar-collapsed]="!isSidebarOpen">
    <header class="dashboard-header">
      <button mat-icon-button (click)="toggleSidebar()" class="menu-toggle">
        <mat-icon>menu</mat-icon>
      </button>
      <h1>{{ currentView === 'overview' ? 'Dashboard' : currentView === 'profile-view' ? 'Profile' : currentView === 'profile-edit' ? 'Edit Profile' : currentView | titlecase }}</h1>
      <div class="header-actions">
        <app-profile-picture 
          [size]="'small'" 
          [editable]="false"
          [showName]="false"
          [showRole]="false"
          (pictureUpdated)="onPictureUpdated($event)"
          (pictureDeleted)="onPictureDeleted()">
        </app-profile-picture>
      </div>
    </header>

    <div class="content-area">
      <div *ngIf="currentView === 'overview'" class="overview-content">
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon" style="background: #e3f2fd;">
              <mat-icon style="color: #1976d2;">build</mat-icon>
            </div>
            <div class="stat-content">
              <p class="stat-label">Pending Maintenance</p>
              <p class="stat-value">{{ stats.pendingMaintenance }}</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon" style="background: #e8f5e9;">
              <mat-icon style="color: #388e3c;">home</mat-icon>
            </div>
            <div class="stat-content">
              <p class="stat-label">Scheduled Inspections</p>
              <p class="stat-value">{{ stats.scheduledInspections }}</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon" style="background: #fff3e0;">
              <mat-icon style="color: #f57c00;">account_balance</mat-icon>
            </div>
            <div class="stat-content">
              <p class="stat-label">Active Deposit Cases</p>
              <p class="stat-value">{{ stats.activeDepositCases }}</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon" style="background: #f3e5f5;">
              <mat-icon style="color: #7b1fa2;">check_circle</mat-icon>
            </div>
            <div class="stat-content">
              <p class="stat-label">Completed Jobs</p>
              <p class="stat-value">{{ stats.completedJobs }}</p>
            </div>
          </div>
        </div>

        <div class="quick-actions-section">
          <h2>Quick Actions</h2>
          <div class="quick-actions-grid">
            <button 
              *ngFor="let action of quickActions" 
              mat-raised-button 
              (click)="action.action()"
              class="quick-action-card"
              [style.border-left]="'4px solid ' + action.color">
              <mat-icon [style.color]="action.color">{{ action.icon }}</mat-icon>
              <div class="action-content">
                <p class="action-title">{{ action.title }}</p>
                <p class="action-description">{{ action.description }}</p>
              </div>
            </button>
          </div>
        </div>
      </div>

      <div *ngIf="currentView === 'profile-view'" class="profile-content">
        <app-profile-view 
          (editProfileEvent)="handleEditProfile()"
          (goBackEvent)="handleGoBackFromProfile()">
        </app-profile-view>
      </div>

      <div *ngIf="currentView === 'profile-edit'" class="profile-content">
        <app-profile-edit 
          (goBackEvent)="handleViewProfile()">
        </app-profile-edit>
      </div>

      <div *ngIf="currentView === 'profile'" class="profile-content">
        <app-profile-view 
          (editProfileEvent)="handleEditProfile()"
          (goBackEvent)="handleGoBackFromProfile()">
        </app-profile-view>
      </div>

      <div *ngIf="currentView === 'maintenance'" class="section-content">
        <h2>Maintenance Requests</h2>
        <p>Maintenance management content goes here...</p>
      </div>

      <div *ngIf="currentView === 'inspections'" class="section-content">
        <h2>Property Inspections</h2>
        <p>Inspections content goes here...</p>
      </div>

      <div *ngIf="currentView === 'deposits'" class="section-content">
        <h2>Deposit Management</h2>
        <p>Deposit management content goes here...</p>
      </div>

      <div *ngIf="currentView === 'properties'" class="section-content">
        <h2>Properties</h2>
        <p>Properties content goes here...</p>
      </div>

      <div *ngIf="currentView === 'messages'" class="section-content">
        <h2>Messages</h2>
        <p>Messages content goes here...</p>
      </div>

      <div *ngIf="currentView === 'reports'" class="section-content">
        <h2>Reports</h2>
        <p>Reports content goes here...</p>
      </div>
    </div>
  </div>

  <div class="mobile-overlay" *ngIf="isMobileMenuOpen" (click)="closeMobileMenu()"></div>
</div>