<!-- src/app/components/property-create/property-create.component.html -->
<div class="property-create-container">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <button class="back-button" (click)="onCancel()" type="button" [disabled]="isSubmitting">
        <mat-icon>arrow_back</mat-icon>
        <span>Back to Properties</span>
      </button>
      <div class="header-text">
        <h1>Create New Property</h1>
        <p>Add a new property to your portfolio</p>
      </div>
    </div>
  </div>

  <!-- Alert Messages -->
  <div *ngIf="errorMessage" class="alert-error">
    <mat-icon>error</mat-icon>
    <span>{{ errorMessage }}</span>
  </div>

  <div *ngIf="successMessage" class="alert-success">
    <mat-icon>check_circle</mat-icon>
    <span>{{ successMessage }}</span>
  </div>

  <!-- Form Container -->
  <div class="form-container">
    <form [formGroup]="propertyForm" (ngSubmit)="onSubmit()" class="property-form">
      
      <!-- Property Name -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Property Name *</mat-label>
        <input matInput 
               formControlName="name" 
               placeholder="Enter property name"
               [disabled]="isSubmitting">
        <mat-hint>Enter a unique name for your property</mat-hint>
        <mat-error *ngIf="hasFieldError('name')">
          {{ getErrorMessage('name') }}
        </mat-error>
      </mat-form-field>

      <!-- Location -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Location *</mat-label>
        <input matInput 
               formControlName="location" 
               placeholder="Enter property location"
               [disabled]="isSubmitting">
        <mat-hint>Include city, area, or neighborhood</mat-hint>
        <mat-error *ngIf="hasFieldError('location')">
          {{ getErrorMessage('location') }}
        </mat-error>
      </mat-form-field>

      <!-- Property Type and Total Units Row -->
      <div class="form-row">
        <!-- Property Type -->
        <mat-form-field appearance="outline" class="half-width">
          <mat-label>Property Type *</mat-label>
          <mat-select formControlName="propertyType" [disabled]="isSubmitting">
            <mat-option *ngFor="let type of propertyTypes" [value]="type.value">
              {{ type.label }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="hasFieldError('propertyType')">
            {{ getErrorMessage('propertyType') }}
          </mat-error>
        </mat-form-field>

        <!-- Total Units -->
        <mat-form-field appearance="outline" class="half-width">
          <mat-label>Total Units *</mat-label>
          <input matInput 
                 type="number" 
                 formControlName="totalUnits" 
                 placeholder="Enter total number of units"
                 min="1"
                 max="10000"
                 [disabled]="isSubmitting">
          <mat-hint>Number of rental units (1-10,000)</mat-hint>
          <mat-error *ngIf="hasFieldError('totalUnits')">
            {{ getErrorMessage('totalUnits') }}
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Description (Optional) -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Description</mat-label>
        <textarea matInput 
                  formControlName="description" 
                  placeholder="Enter property description (optional)"
                  rows="4"
                  maxlength="1000"
                  [disabled]="isSubmitting">
        </textarea>
        <mat-hint align="end" [class.warn]="isDescriptionNearLimit()">
          {{ getRemainingCharacters() }} characters remaining
        </mat-hint>
        <mat-error *ngIf="hasFieldError('description')">
          {{ getErrorMessage('description') }}
        </mat-error>
      </mat-form-field>

      <!-- Form Actions -->
      <div class="form-actions">
        <button type="button" 
                class="btn-secondary" 
                (click)="onCancel()"
                [disabled]="isSubmitting">
          <mat-icon>cancel</mat-icon>
          Cancel
        </button>
        
        <button type="submit" 
                class="btn-primary" 
                [disabled]="!isFormValid">
          <mat-icon *ngIf="!isSubmitting">add</mat-icon>
          <mat-icon *ngIf="isSubmitting" class="spinning">refresh</mat-icon>
          {{ isSubmitting ? 'Creating...' : 'Create Property' }}
        </button>
      </div>
    </form>

    <!-- Property Information Card -->
    <div class="info-card" *ngIf="propertyForm.valid && !isSubmitting">
      <h3>
        <mat-icon>info</mat-icon>
        Property Summary
      </h3>
      <div class="info-content">
        <div class="info-item">
          <strong>Name:</strong> {{ propertyForm.get('name')?.value }}
        </div>
        <div class="info-item">
          <strong>Location:</strong> {{ propertyForm.get('location')?.value }}
        </div>
        <div class="info-item">
          <strong>Type:</strong> {{ propertyService.getPropertyTypeLabel(propertyForm.get('propertyType')?.value) }}
        </div>
        <div class="info-item">
          <strong>Units:</strong> {{ propertyForm.get('totalUnits')?.value }}
        </div>
        <div class="info-item" *ngIf="propertyForm.get('description')?.value">
          <strong>Description:</strong> {{ propertyForm.get('description')?.value }}
        </div>
      </div>
    </div>
  </div>
</div>