<!-- property.component.html -->
<div class="property-container">
  
  <!-- Header Section -->
  <div class="property-header">
    <div class="header-content">
      <div class="header-text">
        <h1>Properties</h1>
        <p>Manage your property portfolio</p>
      </div>
      <div class="header-actions">
        <button class="btn-secondary" (click)="refreshProperties()" [disabled]="loading">
          <mat-icon [class.spinning]="loading">refresh</mat-icon>
          Refresh
        </button>
        <button type="button" class="btn-primary" (click)="createNewProperty()">
          <mat-icon>add</mat-icon>
          Add Property
        </button>
      </div>
    </div>

    <!-- Stats Row -->
    <div class="stats-row" *ngIf="!loading">
      <div class="stat-item">
        <div class="stat-value">{{ totalProperties }}</div>
        <div class="stat-label">Total Properties</div>
      </div>
      <div class="stat-item">
        <div class="stat-value">{{ totalUnits }}</div>
        <div class="stat-label">Total Units</div>
      </div>
      <div class="stat-item">
        <div class="stat-value">{{ occupiedUnits }}</div>
        <div class="stat-label">Occupied Units</div>
      </div>
      <div class="stat-item">
        <div class="stat-value">{{ formatCurrency(totalRevenue) }}</div>
        <div class="stat-label">Monthly Revenue</div>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="loading-content">
      <mat-icon class="loading-spinner spinning">refresh</mat-icon>
      <p>Loading properties...</p>
    </div>
  </div>

  <!-- Properties Grid -->
  <div *ngIf="!loading" class="properties-grid">
    
    <!-- Empty State -->
    <div *ngIf="properties.length === 0" class="empty-state">
      <div class="empty-content">
        <mat-icon>apartment</mat-icon>
        <h3>No Properties Found</h3>
        <p>Start by adding your first property to the system.</p>
        <button type="button" class="btn-primary" (click)="createNewProperty()">
          <mat-icon>add</mat-icon>
          Add Your First Property
        </button>
      </div>
    </div>

    <!-- Property Cards -->
    <mat-card *ngFor="let property of properties" 
              class="property-card" 
              (click)="viewProperty(property.id)">
      
      <!-- Card Header -->
      <mat-card-header class="property-card-header">
        <div class="property-info">
          <mat-card-title>{{ property.name }}</mat-card-title>
          <mat-card-subtitle>
            <mat-icon>location_on</mat-icon>
            {{ property.location }}
          </mat-card-subtitle>
        </div>
        <div class="property-actions">
          <button mat-icon-button 
                  (click)="editProperty(property.id); $event.stopPropagation()"
                  class="action-button edit">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button 
                  (click)="onDeleteProperty(property.id, $event)"
                  class="action-button delete">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </mat-card-header>

      <!-- Card Content -->
      <mat-card-content class="property-card-content">
        
        <!-- Property Details -->
        <div class="property-details">
          <div class="detail-row">
            <span class="detail-label">Type:</span>
            <mat-chip [color]="getStatusColor(property.status)">
              {{ getPropertyTypeLabel(property.propertyType) }}
            </mat-chip>
          </div>
          
          <div class="detail-row">
            <span class="detail-label">Units:</span>
            <span class="detail-value">{{ property.occupiedUnits }}/{{ property.totalUnits }}</span>
          </div>
          
          <div class="detail-row">
            <span class="detail-label">Occupancy:</span>
            <span class="detail-value occupancy" 
                  [class.high]="getOccupancyRate(property) >= 90"
                  [class.medium]="getOccupancyRate(property) >= 70 && getOccupancyRate(property) < 90"
                  [class.low]="getOccupancyRate(property) < 70">
              {{ getOccupancyRate(property) }}%
            </span>
          </div>
          
          <div class="detail-row">
            <span class="detail-label">Monthly Revenue:</span>
            <span class="detail-value revenue">{{ formatCurrency(property.monthlyRevenue) }}</span>
          </div>
        </div>

        <!-- Property Description -->
        <div class="property-description" *ngIf="property.description">
          <p>{{ property.description }}</p>
        </div>

        <!-- Property Status & Date -->
        <div class="property-footer">
          <div class="status-section">
            <span class="status-label">Status:</span>
            <mat-chip [color]="getStatusColor(property.status)" class="status-chip">
              <mat-icon>{{ property.status === 'active' ? 'check_circle' : 
                            property.status === 'maintenance' ? 'build' : 'pause_circle' }}</mat-icon>
              {{ property.status | titlecase }}
            </mat-chip>
          </div>
          <div class="date-section">
            <span class="created-date">Created: {{ formatDate(property.createdDate) }}</span>
          </div>
        </div>
      </mat-card-content>

      <!-- Card Actions -->
      <mat-card-actions class="property-card-actions">
        <button mat-button (click)="viewProperty(property.id); $event.stopPropagation()">
          <mat-icon>visibility</mat-icon>
          View Details
        </button>
        <button mat-button (click)="editProperty(property.id); $event.stopPropagation()">
          <mat-icon>edit</mat-icon>
          Edit
        </button>
        <button mat-button 
                (click)="onToggleStatus(property.id, $event)"
                [class.active]="property.status === 'active'">
          <mat-icon>{{ property.status === 'active' ? 'pause' : 'play_arrow' }}</mat-icon>
          {{ property.status === 'active' ? 'Deactivate' : 'Activate' }}
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>