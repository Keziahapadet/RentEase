<div class="properties-view">
  <div class="view-header">
    <h2>Properties Management</h2>
    <div class="view-actions">
      <div class="view-stats">
        <span class="stat-badge total">{{totalProperties}} Total Properties</span>
        <span class="stat-badge occupied">{{occupiedPropertiesCount}} Occupied</span>
        <span class="stat-badge vacant">{{vacantPropertiesCount}} Vacant</span>
      </div>
      <button class="btn btn-primary" matTooltip="Export Properties">
        <mat-icon>download</mat-icon>
        <span>Export</span>
      </button>
    </div>
  </div>

  <div class="table-container" *ngIf="properties.length > 0; else noProperties">
    <table mat-table [dataSource]="properties" class="property-table">
      
      <ng-container matColumnDef="propertyInfo">
        <th mat-header-cell *matHeaderCellDef>Property Information</th>
        <td mat-cell *matCellDef="let property">
          <div class="property-main-info">
            <div class="property-name">{{property.name}}</div>
            <div class="property-address">{{property.address}}</div>
          </div>
          <div class="property-meta">
            <span class="property-type">{{property.type}}</span>
            <span class="property-units">{{property.unitsCount}} units</span>
          </div>
        </td>
      </ng-container>

      <ng-container matColumnDef="landlordInfo">
        <th mat-header-cell *matHeaderCellDef>Landlord</th>
        <td mat-cell *matCellDef="let property">
          <div class="landlord-info">
            <div class="landlord-name">{{property.landlordName}}</div>
            <div class="landlord-contact">{{property.landlordEmail}}</div>
            <div class="landlord-properties">{{property.landlordPropertiesCount}} properties</div>
          </div>
        </td>
      </ng-container>

      <ng-container matColumnDef="caretakerInfo">
        <th mat-header-cell *matHeaderCellDef>Caretaker</th>
        <td mat-cell *matCellDef="let property">
          <div class="caretaker-info" *ngIf="property.caretakerName; else noCaretaker">
            <div class="caretaker-name">{{property.caretakerName}}</div>
            <div class="caretaker-contact">{{property.caretakerEmail}}</div>
            <div class="caretaker-rating">
              <mat-icon>star</mat-icon>
              {{property.caretakerRating}}/5
            </div>
          </div>
          <ng-template #noCaretaker>
            <span class="no-assignment">Not assigned</span>
          </ng-template>
        </td>
      </ng-container>

      <ng-container matColumnDef="tenantsInfo">
        <th mat-header-cell *matHeaderCellDef>Tenants</th>
        <td mat-cell *matCellDef="let property">
          <div class="tenants-info">
            <div class="tenants-count">
              {{property.tenantsCount}} / {{property.unitsCount}} occupied
            </div>
            <div class="tenants-list">
              <div *ngFor="let tenant of property.tenants" class="tenant-item">
                <span class="tenant-name">{{tenant.name}}</span>
                <span class="tenant-unit">Unit {{tenant.unitNumber}}</span>
              </div>
            </div>
          </div>
        </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let property">
          <span class="status-badge" [class]="getPropertyStatusClass(property.status)">
            {{property.status}}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let property">
          <div class="action-buttons">
            <button class="btn-primary" (click)="viewPropertyDetails.emit(property)" matTooltip="View Details">
              <mat-icon>visibility</mat-icon>
              View
            </button>
            <button class="btn-secondary" (click)="editProperty.emit(property)" matTooltip="Edit Property">
              <mat-icon>edit</mat-icon>
              Edit
            </button>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>

  <ng-template #noProperties>
    <div class="empty-state">
      <mat-icon>apartment</mat-icon>
      <h3>No Properties Found</h3>
      <p>There are no properties in the system yet.</p>
    </div>
  </ng-template>
</div>