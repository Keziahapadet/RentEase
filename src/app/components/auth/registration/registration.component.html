
<div class="registration-container">
  <div class="header">
    <h1>Create Your Account</h1>
    <p class="subtitle">Join our platform and start managing your properties</p>
  </div>

  <div class="step-container">
    <form (ngSubmit)="submitForm()" #registrationForm="ngForm">
      <div class="form-section">
        <h3>Select Your Role</h3>
        <div class="form-group">
          <select [(ngModel)]="selectedRole" name="role" class="form-control" required>
            <option value="">Select your role...</option>
            <option value="tenant"> Tenant </option>
            <option value="landlord"> Landlord </option>
            <option value="caretaker"> Caretaker </option>
            <option value="business"> Business </option>
          </select>
        </div>
      </div>

      <!-- Universal Personal Information -->
      <div class="form-section">
        <h3>Personal Information</h3>
        <div class="form-group">
          <label>Full Name *</label>
          <input type="text" class="form-control" [(ngModel)]="formData.fullName" name="fullName" required />
        </div>
        <div class="form-group">
          <label>Email Address *</label>
          <input type="email" class="form-control" [(ngModel)]="formData.email" name="email" required />
        </div>
        <div class="form-group">
          <label>Phone Number *</label>
          <input type="tel" class="form-control" [(ngModel)]="formData.phone" name="phone" placeholder="+254 700 000 000" required />
        </div>
        <div class="form-group">
          <label>Password *</label>
          <input type="password" class="form-control" [(ngModel)]="formData.password" name="password" required minlength="8" />
        </div>
        <div class="form-group">
          <label>Confirm Password *</label>
          <input type="password" class="form-control" [(ngModel)]="formData.confirmPassword" name="confirmPassword" required />
        </div>
      </div>

      <!-- Tenant Profile (appears when tenant selected) -->
      <div *ngIf="selectedRole === 'tenant'" class="form-section role-specific">
        <h3>Tenant Information</h3>
        <div class="form-group">
          <label>Profile Picture</label>
          <input type="file" class="form-control" (change)="onFileChange($event)" accept="image/*" />
        </div>
      </div>

      <!-- Landlord Profile (appears when landlord selected) -->
      <div *ngIf="selectedRole === 'landlord'" class="form-section role-specific">
        <h3>Landlord Information</h3>
        <div class="form-group">
          <label>Business/Company Name</label>
          <input type="text" class="form-control" [(ngModel)]="formData.landlord.businessName" name="businessName" placeholder="Your property business name" />
        </div>
        <div class="form-group">
          <label>Number of Properties Owned *</label>
          <input type="number" class="form-control" [(ngModel)]="formData.landlord.numProperties" name="numProperties" min="1" required />
        </div>
        <div class="form-group">
          <label>Property Types *</label>
          <select class="form-control" [(ngModel)]="formData.landlord.propertyTypes" name="propertyTypes" required>
            <option value="">Select primary property type...</option>
            <option value="residential">Residential Only</option>
            <option value="commercial">Commercial Only</option>
            <option value="mixed">Mixed (Residential & Commercial)</option>
          </select>
        </div>
        <div class="form-group">
          <label>Business Registration Number</label>
          <input type="text" class="form-control" [(ngModel)]="formData.landlord.businessRegNumber" name="businessRegNumber" placeholder="Company registration number (if applicable)" />
        </div>
        <div class="form-group">
          <label>Tax PIN Number</label>
          <input type="text" class="form-control" [(ngModel)]="formData.landlord.taxPin" name="taxPin" placeholder="KRA PIN number" />
        </div>
      </div>

      <!-- Caretaker Profile (appears when caretaker selected) -->
      <div *ngIf="selectedRole === 'caretaker'" class="form-section role-specific">
        <h3>Caretaker Information</h3>
        <div class="form-group">
          <label>Employer/Management Company *</label>
          <input type="text" class="form-control" [(ngModel)]="formData.caretaker.employer" name="employer" placeholder="Name of property management company" required />
        </div>
        <div class="form-group">
          <label>Properties Currently Managing</label>
          <input type="number" class="form-control" [(ngModel)]="formData.caretaker.propertiesManaged" name="propertiesManaged" min="0" placeholder="Number of properties" />
        </div>
        <div class="form-group">
          <label>Reference Contact</label>
          <input type="text" class="form-control" [(ngModel)]="formData.caretaker.referenceContact" name="referenceContact" placeholder="Supervisor or employer contact" />
        </div>
      </div>

      <!-- Business Profile (appears when business selected) -->
      <div *ngIf="selectedRole === 'business'" class="form-section role-specific">
        <h3>Business Information</h3>
        <div class="form-group">
          <label>Official Business Name *</label>
          <input type="text" class="form-control" [(ngModel)]="formData.business.officialName" name="officialName" placeholder="Registered company name" required />
        </div>
        <div class="form-group">
          <label>Business Registration Number *</label>
          <input type="text" class="form-control" [(ngModel)]="formData.business.registrationNumber" name="registrationNumber" placeholder="Company registration certificate number" required />
        </div>
        <div class="form-group">
          <label>Company Registration Certificate *</label>
          <input type="file" class="form-control" (change)="onFileChange($event)" accept=".pdf,.jpg,.jpeg,.png" required />
          <small class="form-text">Upload PDF, JPG, or PNG format</small>
        </div>
        <div class="form-group">
          <label>Tax PIN Certificate *</label>
          <input type="file" class="form-control" (change)="onFileChange($event)" accept=".pdf,.jpg,.jpeg,.png" required />
          <small class="form-text">KRA PIN certificate</small>
        </div>
        <div class="form-group">
          <label>EARB License Number</label>
          <input type="text" class="form-control" [(ngModel)]="formData.business.earbLicense" name="earbLicense" placeholder="Estate Agents Registration Board license (if applicable)" />
        </div>
        <div class="form-group">
          <label>Number of Properties Managed *</label>
          <input type="number" class="form-control" [(ngModel)]="formData.business.propertiesManaged" name="propertiesManaged" min="1" required />
        </div>
        <div class="form-group">
          <label>Number of Employees</label>
          <input type="number" class="form-control" [(ngModel)]="formData.business.numEmployees" name="numEmployees" min="0" />
        </div>
        <div class="form-group">
          <label>Business Bank Account Details</label>
          <input type="text" class="form-control" [(ngModel)]="formData.business.bankAccount" name="bankAccount" placeholder="Bank name and account number" />
        </div>
        <div class="form-group">
          <label>Primary Contact Person</label>
          <input type="text" class="form-control" [(ngModel)]="formData.business.primaryContact" name="primaryContact" placeholder="Name of main business contact" />
        </div>
        <div class="form-group">
          <label>Business Description</label>
          <textarea class="form-control" [(ngModel)]="formData.business.description" name="businessDescription" rows="3" placeholder="Brief description of your property management services"></textarea>
        </div>
      </div>

      <!-- Terms and Conditions -->
      <div class="form-section terms-section">
        <div class="form-group checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="agreedToTerms" name="agreedToTerms" required>
            <span class="checkmark"></span>
            I agree to the <a href="/terms" target="_blank" class="terms-link">Terms & Conditions</a>
          </label>
        </div>
        <div class="form-group checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="agreedToPrivacy" name="agreedToPrivacy" required>
            <span class="checkmark"></span>
            I agree to the <a href="/privacy" target="_blank" class="terms-link">Privacy Policy</a>
          </label>
        </div>
        <div class="form-group checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="agreedToMarketing" name="agreedToMarketing">
            <span class="checkmark"></span>
            I agree to receive marketing communications and property updates
          </label>
        </div>
      </div>

      <!-- Submit Button -->
      <button type="submit" class="btn btn-primary btn-large" [disabled]="!registrationForm.valid || !agreedToTerms || !agreedToPrivacy">
        Create Account
        <span class="btn-icon">â†’</span>
      </button>

      <!-- Footer with Login Link -->
      <div class="form-footer">
        <p class="security-note">
          ðŸ”’ Your information is encrypted and secure. We'll send an OTP to verify your phone number.
        </p>
        
        <!-- Login Link -->
        <div class="login-prompt">
          <p>Already have an account? <button type="button" class="login-link" (click)="navigateToLogin()">Login</button>
        </div>
      </div>
    </form>
  </div>
</div>