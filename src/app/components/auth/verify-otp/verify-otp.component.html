<div class="verify-otp-container">
  <div class="main-content">
    <div class="verification-card">
      <div class="logo-title">
        <img src="images/logo.png" alt="RentEase" />
        <h2>{{ pageTitle }}</h2>
      </div>
      <div class="verification-info">
        <p>{{ infoText }}</p>
        <p class="subtitle">
          Sent to: <strong>{{ getDisplayEmail() }}</strong>
        </p>
      </div>
      <div class="otp-section">
        <div class="otp-inputs">
          <input #otpInput type="text" class="otp-input"
            [value]="otpData.digit1" (input)="onDigitInput($event, 1)" (keydown)="onKeyDown($event, 1)"
            maxlength="1" autocomplete="off" [disabled]="isLoading" />
          <input #otpInput type="text" class="otp-input"
            [value]="otpData.digit2" (input)="onDigitInput($event, 2)" (keydown)="onKeyDown($event, 2)"
            maxlength="1" autocomplete="off" [disabled]="isLoading" />
          <input #otpInput type="text" class="otp-input"
            [value]="otpData.digit3" (input)="onDigitInput($event, 3)" (keydown)="onKeyDown($event, 3)"
            maxlength="1" autocomplete="off" [disabled]="isLoading" />
          <input #otpInput type="text" class="otp-input"
            [value]="otpData.digit4" (input)="onDigitInput($event, 4)" (keydown)="onKeyDown($event, 4)"
            maxlength="1" autocomplete="off" [disabled]="isLoading" />
          <input #otpInput type="text" class="otp-input"
            [value]="otpData.digit5" (input)="onDigitInput($event, 5)" (keydown)="onKeyDown($event, 5)"
            maxlength="1" autocomplete="off" [disabled]="isLoading" />
          <input #otpInput type="text" class="otp-input"
            [value]="otpData.digit6" (input)="onDigitInput($event, 6)" (keydown)="onKeyDown($event, 6)"
            maxlength="1" autocomplete="off" [disabled]="isLoading" />
          <input #otpInput type="text" class="otp-input"
            [value]="otpData.digit7" (input)="onDigitInput($event, 7)" (keydown)="onKeyDown($event, 7)"
            maxlength="1" autocomplete="off" [disabled]="isLoading" />
        </div>
        <p class="helper-text">Enter the 7-character code (letters and numbers)</p>
      </div>

      <div class="actions-section">
        <button
          mat-raised-button
          color="primary"
          class="verify-btn"
          (click)="verifyOtp()"
          [disabled]="isLoading || !isOtpComplete()"
        >
          <mat-spinner diameter="20" *ngIf="isLoading"></mat-spinner>
          <span *ngIf="!isLoading">Verify Code</span>
          <span *ngIf="isLoading">Verifying...</span>
        </button>

        <div class="resend-section">
          <p class="resend-text">Didn't receive the code?</p>
          <button
            mat-button
            class="resend-btn"
            (click)="resendOtp()"
            [disabled]="!canResend || isLoading"
          >
            {{ getResendText() }}
          </button>
        </div>
      </div>
      <div class="help-section">
        <p class="help-text">
          <mat-icon>info</mat-icon>
          Check your spam folder if you don't see the email
        </p>
      </div>
    </div>
  </div>
</div>
