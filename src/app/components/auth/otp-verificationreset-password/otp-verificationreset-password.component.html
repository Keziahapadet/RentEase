<div class="verify-otp-container">
  <div class="main-content">
    <div class="verification-card">
      <div class="logo-title">
        <img src="images/logo.png" alt="RentEase" />
        <h2>{{ pageTitle }}</h2>
      </div>
      
      <div class="verification-info">
        <p>{{ infoText }}</p>
      </div>
      
      <div class="otp-section">
        <div class="otp-inputs" (paste)="onPaste($event)">
          <input #otpInput type="text" class="otp-input letter-input"
            [(ngModel)]="otpData.digit1" 
            (input)="onDigitInput($event, 1)" 
            (keydown)="onKeyDown($event, 1)"
            maxlength="1" 
            autocomplete="off" 
            inputmode="text"
            [disabled]="isLoading" />
          
          <input #otpInput type="text" class="otp-input number-input"
            [(ngModel)]="otpData.digit2" 
            (input)="onDigitInput($event, 2)" 
            (keydown)="onKeyDown($event, 2)"
            maxlength="1" 
            autocomplete="off" 
            inputmode="numeric"
            [disabled]="isLoading" />
          
          <input #otpInput type="text" class="otp-input number-input"
            [(ngModel)]="otpData.digit3" 
            (input)="onDigitInput($event, 3)" 
            (keydown)="onKeyDown($event, 3)"
            maxlength="1" 
            autocomplete="off" 
            inputmode="numeric"
            [disabled]="isLoading" />
          
          <input #otpInput type="text" class="otp-input number-input"
            [(ngModel)]="otpData.digit4" 
            (input)="onDigitInput($event, 4)" 
            (keydown)="onKeyDown($event, 4)"
            maxlength="1" 
            autocomplete="off" 
            inputmode="numeric"
            [disabled]="isLoading" />
          
          <input #otpInput type="text" class="otp-input number-input"
            [(ngModel)]="otpData.digit5" 
            (input)="onDigitInput($event, 5)" 
            (keydown)="onKeyDown($event, 5)"
            maxlength="1" 
            autocomplete="off" 
            inputmode="numeric"
            [disabled]="isLoading" />
          
          <input #otpInput type="text" class="otp-input number-input"
            [(ngModel)]="otpData.digit6" 
            (input)="onDigitInput($event, 6)" 
            (keydown)="onKeyDown($event, 6)"
            maxlength="1" 
            autocomplete="off" 
            inputmode="numeric"
            [disabled]="isLoading" />
          
          <input #otpInput type="text" class="otp-input number-input"
            [(ngModel)]="otpData.digit7" 
            (input)="onDigitInput($event, 7)" 
            (keydown)="onKeyDown($event, 7)"
            maxlength="1" 
            autocomplete="off" 
            inputmode="numeric"
            [disabled]="isLoading" />
        </div>
        
        <div class="timer-section" *ngIf="expirationTimer > 0 && !isExpired">
          <mat-icon>timer</mat-icon>
          <span class="timer-text">Code expires in: {{ getExpirationTime() }}</span>
        </div>
        
        <div class="expired-warning" *ngIf="isExpired">
          <mat-icon>warning</mat-icon>
          <span class="expired-text">Code has expired. Please request a new one.</span>
        </div>
      </div>

      <div class="actions-section">
        <button
          mat-raised-button
          color="primary"
          class="verify-btn"
          (click)="verifyOtp()"
          [disabled]="isLoading || !isOtpComplete() || isExpired"
        >
          <span class="button-content" *ngIf="isLoading">
            <mat-spinner diameter="20"></mat-spinner>
            <span>Verifying...</span>
          </span>
          <span *ngIf="!isLoading">Verify Code</span>
        </button>

        <div class="resend-section">
          <p class="resend-text">Didn't receive the code?</p>
          <button
            mat-button
            class="resend-btn"
            (click)="resendOtp()"
            [disabled]="!canResend || isLoading || isResending"
          >
            <span class="resend-button-content">
              <mat-icon *ngIf="isResending" class="spinner-icon">
                <mat-spinner diameter="18"></mat-spinner>
              </mat-icon>
              <mat-icon *ngIf="!isResending && canResend">refresh</mat-icon>
              <span>{{ getResendText() }}</span>
            </span>
          </button>
        </div>
      </div>
      
      <div class="help-section">
        <p class="help-text">
          <mat-icon>info</mat-icon>
          Check your spam folder if you don't see the email
        </p>
      </div>

      <div class="back-section">
        <button mat-button class="back-btn" (click)="goBack()">
          <mat-icon>arrow_back</mat-icon>
          Back to Forgot Password
        </button>
      </div>
    </div>
  </div>
</div>