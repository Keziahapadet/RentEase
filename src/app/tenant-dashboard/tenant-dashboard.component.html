<div class="modern-dashboard">
  <!-- Sidebar -->
  <aside class="sidebar" [class.sidebar-open]="isMobileMenuOpen">
    <div class="sidebar-header">
        <span class="logo-text">RentEase</span>
      </div>
    
    
    <nav class="sidebar-nav">
      <div class="nav-primary">
        <a 
          href="javascript:void(0)" 
          class="nav-item" 
          [class.nav-item-active]="activeSection === 'dashboard'"
          (click)="setActiveSection('dashboard')">
          <span class="nav-text">Dashboard</span>
        </a>
        
        <a 
          *ngFor="let item of navigationItems" 
          href="javascript:void(0)" 
          class="nav-item"
          [class.nav-item-active]="activeSection === item.id"
          (click)="setActiveSection(item.id)">
          <div class="nav-icon" [innerHTML]="item.icon"></div>
          <span class="nav-text">{{item.text}}</span>
        </a>
      </div>
      
      <div class="nav-secondary">
        <a href="javascript:void(0)" class="nav-item nav-item-logout" (click)="logout()">
          <span class="nav-text">Logout</span>
        </a>
      </div>
    </nav>
  </aside>

  <!-- Mobile Overlay -->
  <div 
    class="mobile-overlay" 
    [class.mobile-overlay-active]="isMobileMenuOpen"
    (click)="closeMobileMenu()">
  </div>

  <!-- Main Content -->
  <main class="main-container">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="header-left">
          <button 
            class="mobile-menu-btn"
            (click)="toggleMobileMenu()"
            aria-label="Toggle menu">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </button>
          
          <div class="welcome-section">
            <div class="profile-section">
              <img 
                [src]="userProfilePictureUrl" 
                alt="{{userName}}'s profile picture" 
                class="profile-picture"
              />
              <div class="welcome-content">
                <h1 class="welcome-title">Welcome back, {{userName}}!</h1>
                <p class="welcome-subtitle">{{propertyAddress}}</p>
              </div>
            </div>
          </div>
        </div>
        
        <div class="header-right">
          <!-- Collapse Controls -->
          <div class="collapse-controls" *ngIf="activeSection === 'dashboard'">
            <button class="control-btn" (click)="expandAllSections()" title="Expand All">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="7,13 12,18 17,13"></polyline>
                <polyline points="7,6 12,11 17,6"></polyline>
              </svg>
            </button>
            <button class="control-btn" (click)="collapseAllSections()" title="Collapse All">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="17,11 12,6 7,11"></polyline>
                <polyline points="17,18 12,13 7,18"></polyline>
              </svg>
            </button>
            <span class="collapse-counter" *ngIf="getCollapsedCount() > 0">
              {{getCollapsedCount()}} collapsed
            </span>
          </div>

          <button class="notification-btn" (click)="toggleNotifications()" aria-label="Notifications">
            <svg class="notification-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
            <span class="notification-badge" *ngIf="unreadNotifications > 0">{{unreadNotifications}}</span>
          </button>
          
          <div class="user-menu">
            <div class="user-avatar">{{userInitials}}</div>
            <div class="user-info">
              <div class="user-name">{{userName}}</div>
              <div class="user-role">Tenant</div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Dashboard Content -->
    <div class="content-area">
      
      <!-- Dashboard Overview -->
      <div class="page-content" *ngIf="activeSection === 'dashboard'">
        <div class="dashboard-grid">
          
          <!-- Collapsible Deposit Status Card -->
          <div class="card card-feature collapsible-card" 
               [class.collapsed]="isSectionCollapsed('deposit')"
               [class.animating]="isAnimating('deposit')">
            <div class="card-header clickable-header" (click)="toggleSection('deposit')">
              <div class="card-title">
                <h3>Deposit Status</h3>
              </div>
              <div class="header-actions">
                <button class="card-action" (click)="setActiveSection('deposit')" (click)="$event.stopPropagation()">
                  View Details
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 18l6-6-6-6"></path>
                  </svg>
                </button>
                <button class="collapse-toggle">
                  <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M6 9l6 6 6-6"></path>
                  </svg>
                </button>
              </div>
            </div>
            
            <div class="card-content collapsible-content" [class.collapsed]="isSectionCollapsed('deposit')">
              <div class="amount-display">
                <span class="currency">KSH</span>
                <span class="amount">{{formatNumber(depositAmount)}}</span>
              </div>
              <div class="status-badge status-success">{{getDepositStatusText()}}</div>
              
              <div class="progress-timeline">
                <div class="timeline-item" *ngFor="let event of depositTimeline; let i = index">
                  <div class="timeline-indicator" [class.timeline-completed]="event.completed">
                    <div class="timeline-dot"></div>
                    <div class="timeline-line" *ngIf="i < depositTimeline.length - 1"></div>
                  </div>
                  <div class="timeline-content">
                    <div class="timeline-title">{{event.title}}</div>
                    <div class="timeline-date">{{event.date}}</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Collapsible Current Rental Card -->
          <div class="card collapsible-card" 
               [class.collapsed]="isSectionCollapsed('rental')"
               [class.animating]="isAnimating('rental')">
            <div class="card-header clickable-header" (click)="toggleSection('rental')">
              <div class="card-title">
                <h3>Current Rental</h3>
              </div>
              <div class="header-actions">
                <button class="card-action" (click)="setActiveSection('payments')" (click)="$event.stopPropagation()">
                  Payment History
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 18l6-6-6-6"></path>
                  </svg>
                </button>
                <button class="collapse-toggle">
                  <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M6 9l6 6 6-6"></path>
                  </svg>
                </button>
              </div>
            </div>
            
            <div class="card-content collapsible-content" [class.collapsed]="isSectionCollapsed('rental')">
              <div class="property-details">
                <div class="detail-row">
                  <span class="detail-label">Property</span>
                  <span class="detail-value">{{propertyAddress}}</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Landlord</span>
                  <span class="detail-value">{{landlordName}}</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Monthly Rent</span>
                  <span class="detail-value">KSH {{formatNumber(rentAmount)}}</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Status</span>
                  <div class="status-badge status-success">Paid</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Collapsible Quick Actions Card -->
          <div class="card collapsible-card" 
               [class.collapsed]="isSectionCollapsed('quickActions')"
               [class.animating]="isAnimating('quickActions')">
            <div class="card-header clickable-header" (click)="toggleSection('quickActions')">
              <div class="card-title">
                <h3>Quick Actions</h3>
              </div>
              <button class="collapse-toggle">
                <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M6 9l6 6 6-6"></path>
                </svg>
              </button>
            </div>
            
            <div class="card-content collapsible-content" [class.collapsed]="isSectionCollapsed('quickActions')">
              <div class="action-grid">
                <button class="action-btn" (click)="makePayment()">
                  <div class="action-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4"></path>
                      <path d="M4 6v12c0 1.1.9 2 2 2h14v-4"></path>
                      <path d="M18 12a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4v-4h-4z"></path>
                    </svg>
                  </div>
                  <span>Pay Rent</span>
                </button>
                <button class="action-btn" (click)="setActiveSection('maintenance')">
                  <div class="action-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
                    </svg>
                  </div>
                  <span>Report Issue</span>
                </button>
                <button class="action-btn" (click)="setActiveSection('messages')">
                  <div class="action-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                  </div>
                  <span>Message</span>
                </button>
                <button class="action-btn" (click)="setActiveSection('documents')">
                  <div class="action-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                      <polyline points="14,2 14,8 20,8"></polyline>
                    </svg>
                  </div>
                  <span>Documents</span>
                </button>
              </div>
            </div>
          </div>

          <!-- Collapsible Recent Activity Card -->
          <div class="card card-full-width collapsible-card" 
               [class.collapsed]="isSectionCollapsed('activity')"
               [class.animating]="isAnimating('activity')">
            <div class="card-header clickable-header" (click)="toggleSection('activity')">
              <div class="card-title">
                <h3>Recent Activity</h3>
              </div>
              <button class="collapse-toggle">
                <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M6 9l6 6 6-6"></path>
                </svg>
              </button>
            </div>
            
            <div class="card-content collapsible-content" [class.collapsed]="isSectionCollapsed('activity')">
              <div class="activity-list">
                <div class="activity-item">
                  <div class="activity-icon activity-success">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="20,6 9,17 4,12"></polyline>
                    </svg>
                  </div>
                  <div class="activity-content">
                    <div class="activity-title">February rent payment received</div>
                    <div class="activity-time">2 days ago</div>
                  </div>
                </div>
                <div class="activity-item">
                  <div class="activity-icon activity-info">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
                    </svg>
                  </div>
                  <div class="activity-content">
                    <div class="activity-title">Maintenance request submitted</div>
                    <div class="activity-time">5 days ago</div>
                  </div>
                </div>
                <div class="activity-item">
                  <div class="activity-icon activity-info">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                  </div>
                  <div class="activity-content">
                    <div class="activity-title">Message from landlord</div>
                    <div class="activity-time">1 week ago</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
      
      <!-- Deposit Details Section -->
      <div class="page-content" *ngIf="activeSection === 'deposit'">
        <div class="page-header">
          <button class="back-btn" (click)="setActiveSection('dashboard')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7"></path>
            </svg>
            Back to Dashboard
          </button>
          <div class="page-title">
            <h2>Deposit Details</h2>
            <p>Your security deposit information and protection details</p>
          </div>
        </div>
        
        <div class="content-grid">
          <div class="card collapsible-card" 
               [class.collapsed]="isSectionCollapsed('deposit')"
               [class.animating]="isAnimating('deposit')">
            <div class="card-header clickable-header" (click)="toggleSection('deposit')">
              <div class="card-title">
                <h3>Deposit Summary</h3>
              </div>
              <button class="collapse-toggle">
                <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M6 9l6 6 6-6"></path>
                </svg>
              </button>
            </div>
            <div class="card-content collapsible-content" [class.collapsed]="isSectionCollapsed('deposit')">
              <div class="summary-stats">
                <div class="stat-item">
                  <span class="stat-label">Deposit Amount</span>
                  <span class="stat-value">KSH {{formatNumber(depositAmount)}}</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Status</span>
                  <div class="status-badge status-success">Protected</div>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Protection Scheme</span>
                  <span class="stat-value">Government Deposit Protection</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Date Paid</span>
                  <span class="stat-value">January 15, 2024</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <h3>Timeline</h3>
              </div>
            </div>
            <div class="card-content">
              <div class="progress-timeline">
                <div class="timeline-item" *ngFor="let event of depositTimeline; let i = index">
                  <div class="timeline-indicator" [class.timeline-completed]="event.completed">
                    <div class="timeline-dot"></div>
                    <div class="timeline-line" *ngIf="i < depositTimeline.length - 1"></div>
                  </div>
                  <div class="timeline-content">
                    <div class="timeline-title">{{event.title}}</div>
                    <div class="timeline-date">{{event.date}}</div>
                    <div class="timeline-description" *ngIf="event.completed">
                      Status: Completed
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Payments Section -->
      <div class="page-content" *ngIf="activeSection === 'payments'">
        <div class="page-header">
          <button class="back-btn" (click)="setActiveSection('dashboard')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7"></path>
            </svg>
            Back to Dashboard
          </button>
          <div class="page-title">
            <h2>Payment History</h2>
            <p>View and manage your rental payments</p>
          </div>
        </div>
        
        <div class="card collapsible-card" 
             [class.collapsed]="isSectionCollapsed('payments')"
             [class.animating]="isAnimating('payments')">
          <div class="card-header clickable-header" (click)="toggleSection('payments')">
            <div class="card-title">
              <h3>Recent Payments</h3>
            </div>
            <div class="header-actions">
              <button class="btn btn-primary" (click)="makePayment()" (click)="$event.stopPropagation()">
                Make Payment
              </button>
              <button class="collapse-toggle">
                <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M6 9l6 6 6-6"></path>
                </svg>
              </button>
            </div>
          </div>
          <div class="card-content collapsible-content" [class.collapsed]="isSectionCollapsed('payments')">
            <div class="table-container">
              <table class="modern-table">
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Type</th>
                    <th>Amount</th>
                    <th>Method</th>
                    <th>Status</th>
                    <th>Reference</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let payment of paymentHistory">
                    <td>{{payment.date}}</td>
                    <td>{{payment.type}}</td>
                    <td>KSH {{formatNumber(payment.amount)}}</td>
                    <td>{{payment.method}}</td>
                    <td>
                      <div class="status-badge" [ngClass]="getStatusClass(payment.status)">
                        {{payment.status | titlecase}}
                      </div>
                    </td>
                    <td>{{payment.reference}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Maintenance Section -->
      <div class="page-content" *ngIf="activeSection === 'maintenance'">
        <div class="page-header">
          <button class="back-btn" (click)="setActiveSection('dashboard')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7"></path>
            </svg>
            Back to Dashboard
          </button>
          <div class="page-title">
            <h2>Maintenance Requests</h2>
            <p>Submit and track maintenance issues</p>
          </div>
        </div>
        
        <div class="content-grid">
          <div class="card collapsible-card" 
               [class.collapsed]="isSectionCollapsed('maintenance')"
               [class.animating]="isAnimating('maintenance')">
            <div class="card-header clickable-header" (click)="toggleSection('maintenance')">
              <div class="card-title">
                <h3>Submit New Request</h3>
              </div>
              <button class="collapse-toggle">
                <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M6 9l6 6 6-6"></path>
                </svg>
              </button>
            </div>
            <div class="card-content collapsible-content" [class.collapsed]="isSectionCollapsed('maintenance')">
              <form (ngSubmit)="submitMaintenanceRequest()" #maintenanceForm="ngForm" class="modern-form">
                <div class="form-group">
                  <label for="title" class="form-label">Issue Title</label>
                  <input 
                    type="text" 
                    id="title" 
                    [(ngModel)]="newMaintenanceRequest.title" 
                    name="title"
                    class="form-input" 
                    placeholder="Brief description of the issue"
                    required>
                </div>
                
                <div class="form-group">
                  <label for="category" class="form-label">Category</label>
                  <select 
                    id="category" 
                    [(ngModel)]="newMaintenanceRequest.category" 
                    name="category"
                    class="form-select">
                    <option value="">Select category</option>
                    <option value="Plumbing">Plumbing</option>
                    <option value="Electrical">Electrical</option>
                    <option value="HVAC">HVAC</option>
                    <option value="General Repairs">General Repairs</option>
                    <option value="Appliances">Appliances</option>
                  </select>
                </div>
                
                <div class="form-group">
                  <label for="priority" class="form-label">Priority</label>
                  <select 
                    id="priority" 
                    [(ngModel)]="newMaintenanceRequest.priority" 
                    name="priority"
                    class="form-select">
                    <option value="low">Low</option>
                    <option value="medium">Medium</option>
                    <option value="high">High</option>
                    <option value="urgent">Urgent</option>
                  </select>
                </div>
                
                <div class="form-group">
                  <label for="description" class="form-label">Description</label>
                  <textarea 
                    id="description" 
                    [(ngModel)]="newMaintenanceRequest.description" 
                    name="description"
                    class="form-textarea" 
                    rows="4"
                    placeholder="Detailed description of the issue"
                    required></textarea>
                </div>
                
                <button type="submit" class="btn btn-primary" [disabled]="!maintenanceForm.form.valid">
                  Submit Request
                </button>
              </form>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <h3>Your Requests</h3>
              </div>
            </div>
            <div class="card-content">
              <div class="request-list">
                <div class="request-item" *ngFor="let request of maintenanceRequests">
                  <div class="request-header">
                    <h4 class="request-title">{{request.title}}</h4>
                    <div class="status-badge" [ngClass]="getStatusClass(request.status)">
                      {{request.status | titlecase}}
                    </div>
                  </div>
                  <div class="request-meta">
                    <span class="meta-item">Category: {{request.category}}</span>
                    <span class="meta-item">
                      Priority: 
                      <span class="priority-badge" [ngClass]="getPriorityClass(request.priority)">
                        {{request.priority | titlecase}}
                      </span>
                    </span>
                    <span class="meta-item">Submitted: {{request.dateSubmitted}}</span>
                  </div>
                  <p class="request-description">{{request.description}}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Documents Section -->
      <div class="page-content" *ngIf="activeSection === 'documents'">
        <div class="page-header">
          <button class="back-btn" (click)="setActiveSection('dashboard')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7"></path>
            </svg>
            Back to Dashboard
          </button>
          <div class="page-title">
            <h2>Documents</h2>
            <p>Access all your rental documents</p>
          </div>
        </div>
        
        <div class="card collapsible-card" 
             [class.collapsed]="isSectionCollapsed('documents')"
             [class.animating]="isAnimating('documents')">
          <div class="card-header clickable-header" (click)="toggleSection('documents')">
            <div class="card-title">
              <h3>My Documents</h3>
            </div>
            <div class="header-actions">
              <select class="form-control" (click)="$event.stopPropagation()">
                <option value="">All Categories</option>
                <option value="Legal">Legal</option>
                <option value="Payments">Payments</option>
                <option value="Inspection">Inspection</option>
                <option value="Insurance">Insurance</option>
              </select>
              <button class="collapse-toggle">
                <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M6 9l6 6 6-6"></path>
                </svg>
              </button>
            </div>
          </div>
          <div class="card-content collapsible-content" [class.collapsed]="isSectionCollapsed('documents')">
            <div class="document-grid">
              <div class="document-card" *ngFor="let doc of documents">
                <div class="document-header">
                  <div class="document-icon-large" [innerHTML]="doc.icon"></div>
                  <div class="document-actions">
                    <button class="btn-icon" (click)="downloadDocument(doc)" title="Download">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7,10 12,15 17,10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                      </svg>
                    </button>
                  </div>
                </div>
                <div class="document-info">
                  <h4>{{doc.name}}</h4>
                  <div class="document-meta">
                    <span class="document-date">{{doc.date}}</span>
                    <span class="document-size">{{doc.size}}</span>
                  </div>
                  <span class="document-category">{{doc.category}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Messages Section -->
      <div class="page-content" *ngIf="activeSection === 'messages'">
        <div class="page-header">
          <button class="back-btn" (click)="setActiveSection('dashboard')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7"></path>
            </svg>
            Back to Dashboard
          </button>
          <div class="page-title">
            <h2>Messages</h2>
            <p>Communicate with your landlord and property manager</p>
          </div>
        </div>
        
        <div class="content-grid">
          <div class="card collapsible-card" 
               [class.collapsed]="isSectionCollapsed('messages')"
               [class.animating]="isAnimating('messages')">
            <div class="card-header clickable-header" (click)="toggleSection('messages')">
              <div class="card-title">
                <h3>Conversations</h3>
              </div>
              <button class="collapse-toggle">
                <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M6 9l6 6 6-6"></path>
                </svg>
              </button>
            </div>
            <div class="card-content collapsible-content" [class.collapsed]="isSectionCollapsed('messages')">
              <div class="conversation-list">
                <div class="conversation-item" 
                     *ngFor="let conversation of conversations"
                     [class.active]="activeConversationId === conversation.id"
                     (click)="setActiveConversation(conversation.id)">
                  <div class="conversation-avatar">{{conversation.avatarText}}</div>
                  <div class="conversation-info">
                    <div class="conversation-name">{{conversation.name}}</div>
                    <div class="conversation-preview">{{conversation.lastMessage}}</div>
                  </div>
                  <div class="conversation-time">{{conversation.time}}</div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <h3>Send New Message</h3>
              </div>
            </div>
            <div class="card-content">
              <form (ngSubmit)="sendMessage()" #messageForm="ngForm" class="modern-form">
                <div class="form-group">
                  <label for="recipient" class="form-label">To</label>
                  <select id="recipient" [(ngModel)]="newMessage.recipient" name="recipient" class="form-select" required>
                    <option value="">Select recipient</option>
                    <option value="landlord">{{landlordName}} (Landlord)</option>
                    <option value="caretaker">{{caretakerName}} (Caretaker)</option>
                    <option value="management">Property Management</option>
                  </select>
                </div>
                
                <div class="form-group">
                  <label for="subject" class="form-label">Subject</label>
                  <input 
                    type="text" 
                    id="subject" 
                    [(ngModel)]="newMessage.subject" 
                    name="subject"
                    class="form-input" 
                    placeholder="Message subject">
                </div>
                
                <div class="form-group">
                  <label for="content" class="form-label">Message</label>
                  <textarea 
                    id="content" 
                    [(ngModel)]="newMessage.content" 
                    name="content"
                    class="form-textarea" 
                    rows="6"
                    placeholder="Type your message here..."
                    required></textarea>
                </div>
                
                <button type="submit" class="btn btn-primary" [disabled]="!messageForm.form.valid">
                  Send Message
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Marketplace Section -->
      <div class="page-content" *ngIf="activeSection === 'marketplace'">
        <div class="page-header">
          <button class="back-btn" (click)="setActiveSection('dashboard')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7"></path>
            </svg>
            Back to Dashboard
          </button>
          <div class="page-title">
            <h2>Community Marketplace</h2>
            <p>Buy, sell, and trade with your neighbors</p>
          </div>
        </div>
        
        <div class="card collapsible-card" 
             [class.collapsed]="isSectionCollapsed('marketplace')"
             [class.animating]="isAnimating('marketplace')">
          <div class="card-header clickable-header" (click)="toggleSection('marketplace')">
            <div class="marketplace-tabs" (click)="$event.stopPropagation()">
              <button 
                class="tab" 
                [class.active]="activeMarketplaceTab === 'items'"
                (click)="setActiveMarketplaceTab('items')">
                Items for Sale
              </button>
              <button 
                class="tab" 
                [class.active]="activeMarketplaceTab === 'services'"
                (click)="setActiveMarketplaceTab('services')">
                Services
              </button>
              <button 
                class="tab" 
                [class.active]="activeMarketplaceTab === 'housing'"
                (click)="setActiveMarketplaceTab('housing')">
                Housing
              </button>
            </div>
            <button class="collapse-toggle">
              <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"></path>
              </svg>
            </button>
          </div>
          <div class="card-content collapsible-content" [class.collapsed]="isSectionCollapsed('marketplace')">
            <div class="marketplace-grid">
              <div class="marketplace-card" *ngFor="let item of getMarketplaceItems()">
                <div class="marketplace-image">
                  <div class="placeholder-image">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                      <circle cx="8.5" cy="8.5" r="1.5"></circle>
                      <polyline points="21,15 16,10 5,21"></polyline>
                    </svg>
                  </div>
                </div>
                <div class="marketplace-info">
                  <h4>{{item.title}}</h4>
                  <p class="marketplace-description">{{item.description}}</p>
                  <div class="marketplace-meta">
                    <div class="marketplace-price">KSH {{formatNumber(item.price)}}</div>
                    <div class="marketplace-location">{{item.location}}</div>
                  </div>
                  <div class="marketplace-seller">Seller: {{item.seller}}</div>
                </div>
                <div class="marketplace-actions">
                  <button class="btn btn-primary">Contact Seller</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Reviews Section -->
      <div class="page-content" *ngIf="activeSection === 'reviews'">
        <div class="page-header">
          <button class="back-btn" (click)="setActiveSection('dashboard')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7"></path>
            </svg>
            Back to Dashboard
          </button>
          <div class="page-title">
            <h2>Reviews & Ratings</h2>
            <p>Rate your experience and see community feedback</p>
          </div>
        </div>
        
        <div class="content-grid">
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <h3>Overall Rating</h3>
              </div>
            </div>
            <div class="card-content">
              <div class="rating-summary">
                <div class="rating-score">{{averageRating}}</div>
                <div class="rating-stars" [innerHTML]="getStars(averageRating)"></div>
                <div class="rating-count">{{recentReviews.length}} reviews</div>
              </div>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <h3>Leave a Review</h3>
              </div>
            </div>
            <div class="card-content">
              <form class="modern-form">
                <div class="form-group">
                  <label class="form-label">Rating</label>
                  <div class="rating-input">
                    <span>★★★★★</span>
                  </div>
                </div>
                <div class="form-group">
                  <label for="review" class="form-label">Your Review</label>
                  <textarea 
                    id="review" 
                    class="form-textarea" 
                    rows="4"
                    placeholder="Share your experience..."></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Submit Review</button>
              </form>
            </div>
          </div>
        </div>
        
        <div class="card collapsible-card" 
             [class.collapsed]="isSectionCollapsed('reviews')"
             [class.animating]="isAnimating('reviews')">
          <div class="card-header clickable-header" (click)="toggleSection('reviews')">
            <div class="card-title">
              <h3>Recent Reviews</h3>
            </div>
            <button class="collapse-toggle">
              <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"></path>
              </svg>
            </button>
          </div>
          <div class="card-content collapsible-content" [class.collapsed]="isSectionCollapsed('reviews')">
            <div class="review-list">
              <div class="review-card" *ngFor="let review of recentReviews">
                <div class="review-header">
                  <div class="review-avatar">{{review.reviewer.charAt(0)}}</div>
                  <div class="review-meta">
                    <div class="reviewer-name">{{review.reviewer}}</div>
                    <div class="review-date">{{review.date}}</div>
                  </div>
                  <div class="review-rating" [innerHTML]="getStars(review.rating)"></div>
                </div>
                <div class="review-content">{{review.content}}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Settings Section -->
      <div class="page-content" *ngIf="activeSection === 'settings'">
        <div class="page-header">
          <button class="back-btn" (click)="setActiveSection('dashboard')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7"></path>
            </svg>
            Back to Dashboard
          </button>
          <div class="page-title">
            <h2>Account Settings</h2>
            <p>Manage your account preferences and information</p>
          </div>
        </div>
        
        <div class="settings-grid">
          <div class="card collapsible-card" 
               [class.collapsed]="isSectionCollapsed('settings')"
               [class.animating]="isAnimating('settings')">
            <div class="card-header clickable-header" (click)="toggleSection('settings')">
              <div class="card-title">
                <h3>Personal Information</h3>
              </div>
              <button class="collapse-toggle">
                <svg class="collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M6 9l6 6 6-6"></path>
                </svg>
              </button>
            </div>
            <div class="card-content collapsible-content" [class.collapsed]="isSectionCollapsed('settings')">
              <form class="modern-form">
                <div class="form-group">
                  <label for="fullName" class="form-label">Full Name</label>
                  <input type="text" id="fullName" class="form-input" [value]="userName">
                </div>
                <div class="form-group">
                  <label for="email" class="form-label">Email Address</label>
                  <input type="email" id="email" class="form-input" value="john.doe@email.com">
                </div>
                <div class="form-group">
                  <label for="phone" class="form-label">Phone Number</label>
                  <input type="tel" id="phone" class="form-input" value="+254 700 123 456">
                </div>
                <button type="submit" class="btn btn-primary">Update Information</button>
              </form>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <h3>Notification Preferences</h3>
              </div>
            </div>
            <div class="card-content">
              <div class="preferences-list">
                <label class="preference-item">
                  <input type="checkbox" checked class="checkbox">
                  <span class="checkbox-label">Email notifications for rent reminders</span>
                </label>
                <label class="preference-item">
                  <input type="checkbox" checked class="checkbox">
                  <span class="checkbox-label">SMS notifications for maintenance updates</span>
                </label>
                <label class="preference-item">
                  <input type="checkbox" class="checkbox">
                  <span class="checkbox-label">Push notifications for messages</span>
                </label>
              </div>
              <button class="btn btn-primary">Save Preferences</button>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <h3>Security</h3>
              </div>
            </div>
            <div class="card-content">
              <form class="modern-form">
                <div class="form-group">
                  <label for="currentPassword" class="form-label">Current Password</label>
                  <input type="password" id="currentPassword" class="form-input">
                </div>
                <div class="form-group">
                  <label for="newPassword" class="form-label">New Password</label>
                  <input type="password" id="newPassword" class="form-input">
                </div>
                <div class="form-group">
                  <label for="confirmPassword" class="form-label">Confirm New Password</label>
                  <input type="password" id="confirmPassword" class="form-input">
                </div>
                <button type="submit" class="btn btn-primary">Change Password</button>
              </form>
            </div>
          </div>
        </div>
      </div>
      
    </div>
  </main>
</div>